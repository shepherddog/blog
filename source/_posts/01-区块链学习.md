---
title: '区块链学习(1):区块链简介'
date: 2018-04-23 12:37:52
tags: 
- 区块链
comments: true
---

本文主要将建区块链的概念、技术及设计原理。

## 区块链的概念及技术

了解区块链的设计思想和核心技术，即“什么是区块链”、“区块链为什么这么设计”和“区块链具体如何实现”。

### 什么是区块链

我们先了解区块链的基础定义，很多人说区块链是“加密的分布式记账技术”，本质上是一个去中心化的数据库。为什么区块链难以理解，加密、分布式和记账涉及了三个不同的复杂学科，加密是密码学、分布式是网络拓扑、而记账则是金融概念。

**一、定义**

狭义的定义：区块链是一种按照时间顺序将数据区块以顺序相连的一种链式数据结构，并以密码学方式保证的不可篡改和不可伪造的分布式账本。

广义的定义：是用分布式数据库识别、传播和记载信息的智能化对等网络, 也称为价值互联网。
<!-- more -->
**二、中心化记账**

首先来讲一下传统的中心化记账，比如A转账了100元到B，如果A和B在同一家银行，就是在那家银行的中心数据库中，A的账户减了100元，B的账户加了100元，数据库同时记录了交易的流水信息。

中心化记账有很多好处，数据是唯一的，不容易出错，并且转账效率很高，但是从金融角度存在两个问题：

第一，中心化的机构是否真的可信。中心化的机构会存在信任问题，比如机构人员挪用，进行数据造假。

第二，中心化的机构存在安全隐患。中心化的机构遭到黑客攻击，或者自然灾害。

**三、分布式记账**

基于传统中心化记账存在的问题，中本聪，作为一个密码学专家，他设计了一套点对点的电子现金系统，即比特币。

简单的说转账不通过中心机构转，而是点对点的转。同时向网络上的所有人通知一下，就把帐记在所有人的账本上，每个账本都保持统一。这种方式就是分布式记账。

分布式记账的好处是如果你不能改变网络上51%用户的账本，是无法修改数据的。就解决了上述中心化记账的两个问题。

总结，中心化就是把所有交易存在统一的数据库。分布式记账就是把我们每一笔交易向全网广播，每个人都记录，所有人电脑上保留一个一模一样的账本，任何人想修改，就要修改大部分的计算机，这就叫做分布式记账。

**四、区块链如何工作**

![img](http://image.woshipm.com/wp-files/2018/01/NF0VadcJPTfWlPpkOFnM.jpg)

### 区块链设计原理

了解了区块链的基本原理后，我们就需要了解区块链为什么这么设计，以及这样设计有什么用。

**一、基本原理**

区块链的基本原理不难理解，基本概念包括：

- 交易：对账本状态的改变，如添加一条记录；

- 区块：记录一段时间内发生的交易和状态，是对当前账本状态的一次共识；

- 链：由一个个区块按照发生顺序串联而成，是状态变化的日志记录。

  ![img](http://book.8btc.com/books/6/blockchain_guide/_book/intro/_images/simpleBlockchain.png)

如上图所示，如果把区块链作为一个状态机，则每次交易就是试图改变一次状态，每次生成区块就是参与者对于其中包括的所有交易改变状态的结果确认。

区块链作为一个分布式记账记录，这个记录本只允许添加，不允许删除，结构是一个线性的链表，由一个个区块连接而成。新的数据要加入，必须放到一个新的区块中来加入，而这个区块需要满足一定条件（共识机制，也就是工作量证明）才能保证它格式上合法，一旦合法就全网广播，各个节点验证通过后方可加入到链条中。

**二、激励机制**

理解了区块链的基本原理，会发现一个问题，就是其他节点凭什么为你记账？区块链系统发明了一套激励机制。简单说，如果谁愿意记账，奖励的代币就归谁了（如比特币）。那如果大家都想记账怎么办呢，区块链系统又提出一套竞争机制，叫工作量证明。

**三、工作量证明**

以比特币举例，他的工作量证明（POW）使用SHA-256对一个value进行hash，看结果是否拥有所要求数量的前导零，比如我们要求hash得到的值为 0000……，拥有四个前导零。

SHA-256(SHA-256(“基准字符串” + “随机字符串”)) = 000000000000…01011101…

当一个节点完成了工作量证明，就会广播自己的这个block给其他所有节点。

**三、防止恶意破坏**

还是以比特币举例，如果一个节点想要篡改一条记录，他需要重新做这个block以及它之后所有block的工作量证明，然后需要赶上并超过那条由诚实节点们打造的合法链。但是随着合法连继续添加新的block，该攻击者追上的可能性是指数下降的。

就是说，除非攻击方的算理超过诚实节点们的算力，否则是无法攻破的。但攻击方算力如果超过51%，就会出现被攻破的风险。

**四、不利原理**

> 生物学上有一个原理叫做不利原理（the Handicap Principle），该原理可以帮助我们解释工作量证明的过程。这个原理说，当两只动物有合作的动机时，它们必须很有说服力地向对方表达善意。为了打消对方的疑虑，它们向对方表达友好时必须附上自己的代价，使得自己背叛对方时不得不付出昂贵的代价。换句话说，表达方式本身必须是对自己不利的。

比特币的工作量证明也是很好的利用了不利原理的一个例子：产生一个新区块是建立在耗时耗力的巨大代价上的，所以当新区块诞生后，某个旷工要么忽视它，继续自己的新区块寻找，要么接受它，然后接着它再继续自己的更新区块的挖掘。显然前者是不明智的，因为在比特币网络里，以最长链为合法链，这个旷工选择忽视而另起炉灶，就不得不说服足够多的旷工沿着他的路线走，相反要是他选择接受，不仅不会付出额外的辛苦，而且照样可以继续自己的更新区块的挖矿，只利不害，而且这属于全网成员在遵守一个不成文的规定，对之后该旷工自己发现新区块更有利，不会再出现你走你的我走我的，是一个全网良性建设。

**五、51%攻击**

上面的原理说明了，如果存在节点的算力超过50%，同时节点对区块链网络进行攻击，就会造成区块链网络崩溃。如果有51%的算力，代表他可以随时挖出一条比外面更长的链，也就是说链上的交易都是不确定的，那区块链网络就失去了意义了。

那如何避免呢？比特币的方式是算力足够高，保证没有节点的算力超过50%（实际上比特大陆已经把控60%以上的算力，2017）。

只是事实上51%攻击存在悖论，使得它事实上难以发生，因为通过51%算力产出的收益大于摧毁比特币网络的收益。

